"use strict";(self["webpackChunkvue2_cms_admin"]=self["webpackChunkvue2_cms_admin"]||[]).push([[357],{5357:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("el-card",{staticClass:"box-card"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("管理员列表")])]),e("el-table",{attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"user_id",label:"#"}}),e("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),e("el-table-column",{attrs:{prop:"fullname",label:"姓名",width:"180"}}),e("el-table-column",{attrs:{prop:"sex",label:"性别",width:"180"}}),e("el-table-column",{attrs:{prop:"tel",label:"手机号"}}),e("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e("el-table-column",{attrs:{label:"头像",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-avatar",{attrs:{src:t.row.avatar}})]}}])}),e("el-table-column",{attrs:{label:"角色",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"top"}},[e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("el-tag",{attrs:{size:"medium"}},[t._v(t._s(a.row.role_name))])],1)])]}}])}),e("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[1===a.row.usable?e("el-tag",{attrs:{type:"success"}},[t._v("正常")]):t._e(),-1===a.row.usable?e("el-tag",{attrs:{type:"warning"}},[t._v("审核中")]):t._e(),-2===a.row.usable?e("el-tag",{attrs:{type:"info"}},[t._v("禁用")]):t._e()]}}])}),e("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{attrs:{to:{name:"AdminEdit",params:{user_id:a.row.user_id}}}},[e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"admin:edit",expression:"'admin:edit'"}],attrs:{size:"mini",type:"primary"}},[t._v("编辑")])],1),e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:admin:audit",expression:"'system:admin:audit'"}],attrs:{size:"mini",type:"success",disabled:1===a.row.user_id},on:{click:function(e){return t.openAuditDialog(a.row)}}},[t._v("审核")]),e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:admin:remove",expression:"'system:admin:remove'"}],attrs:{size:"mini",type:"danger",disabled:1===a.row.user_id},on:{click:function(e){return t.handleRemove(a.row.user_id,a.$index)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{title:"审核",visible:t.audit_dialog_visible},on:{"update:visible":function(e){t.audit_dialog_visible=e}}},[e("el-form",[[e("el-radio-group",{model:{value:t.audit_status,callback:function(e){t.audit_status=e},expression:"audit_status"}},[e("el-radio",{attrs:{label:1}},[t._v("正常")]),e("el-radio",{attrs:{label:-1}},[t._v("审核中")]),e("el-radio",{attrs:{label:-2}},[t._v("禁用")])],1)]],2),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.audit_dialog_visible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleAudit}},[t._v("确 定")])],1)],1)],1)},i=[],l=a(9551),r={data(){return{tableData:[],audit_dialog_visible:!1,audit_status:0,current_admin:""}},created(){this.loadList()},methods:{async loadList(){let{status:t,msg:e,data:a}=await l.wt.list({pagesize:8});t&&(this.tableData=a)},handleRemove(t,e){this.$confirm("此操作将永久删除该账户，是否删除","确认删除",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((async()=>{let{status:a,msg:s}=await l.wt.remove(t);a?(this.tableData.splice(e,1),this.$message.success(s)):this.$message.error(s)})).catch((()=>{this.$message.info("已取消删除")}))},openAuditDialog(t){this.audit_dialog_visible=!0,this.current_admin=t},async handleAudit(){let{user_id:t}=this.current_admin,{status:e,msg:a}=await l.wt.audit({user_id:t,usable:this.audit_status});e&&(this.$message.success(a),this.audit_dialog_visible=!1,this.current_admin.usable=this.audit_status)}}},n=r,o=a(1001),u=(0,o.Z)(n,s,i,!1,null,"73cbc48a",null),d=u.exports}}]);
//# sourceMappingURL=357.111acc5f.js.map