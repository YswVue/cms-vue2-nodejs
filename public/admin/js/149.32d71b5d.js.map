{"version":3,"file":"js/149.32d71b5d.js","mappings":"wKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,YAAYC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,OAAO,CAACF,EAAIO,GAAG,UAAUL,EAAG,YAAY,CAACM,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,qBAAsBC,WAAW,yBAAyBP,MAAM,CAAC,KAAO,UAAU,KAAO,8BAA8B,MAAQ,GAAG,KAAO,QAAQQ,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIe,qBAAsB,CAAI,IAAI,CAACf,EAAIO,GAAG,WAAW,GAAGL,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOL,EAAIgB,YAAY,CAACd,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,OAAOH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,WAAW,MAAQ,UAAUH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,QAAQY,YAAYjB,EAAIkB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACrB,EAAIO,GAAG,IAAIP,EAAIsB,GAAGtB,EAAIuB,gBAAgBF,EAAMG,IAAIC,cAAc,KAAK,OAAOvB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,QAAQY,YAAYjB,EAAIkB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACrB,EAAIO,GAAG,IAAIP,EAAIsB,GAAGtB,EAAIuB,gBAAgBF,EAAMG,IAAIE,cAAc,KAAK,OAAOxB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMY,YAAYjB,EAAIkB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACnB,EAAG,YAAY,CAACM,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,mBAAoBC,WAAW,uBAAuBP,MAAM,CAAC,KAAO,UAAU,KAAO,eAAe,MAAQ,GAAG,KAAO,QAAQQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAI2B,eAAeN,EAAMG,IAAI,IAAI,CAACxB,EAAIO,GAAG,QAAQL,EAAG,YAAY,CAACM,WAAW,CAAC,CAACC,KAAK,aAAaC,QAAQ,eAAeC,MAAO,qBAAsBC,WAAW,yBAAyBP,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,KAAO,UAAUQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAI4B,aAAaP,EAAMG,IAAIK,OAAQR,EAAMS,OAAO,IAAI,CAAC9B,EAAIO,GAAG,QAAQ,QAAQ,GAAGL,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,QAAUL,EAAIe,qBAAqBF,GAAG,CAAC,iBAAiB,SAASC,GAAQd,EAAIe,oBAAoBD,CAAM,EAAE,MAAQ,SAASA,GAAQ,OAAOd,EAAI+B,kBAAkB,aAAa,IAAI,CAAC7B,EAAG,UAAU,CAAC8B,IAAI,aAAa3B,MAAM,CAAC,MAAQL,EAAIiC,WAAW,MAAQjC,EAAIkC,MAAM,cAAc,GAAG,cAAc,UAAU,CAAChC,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,OAAO,aAAe,OAAO8B,MAAM,CAACxB,MAAOX,EAAIiC,WAAWG,SAAUC,SAAS,SAAUC,GAAMtC,EAAIuC,KAAKvC,EAAIiC,WAAY,WAAYK,EAAI,EAAE1B,WAAW,0BAA0B,IAAI,GAAGV,EAAG,OAAO,CAACE,YAAY,gBAAgBC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,YAAY,CAACW,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIe,qBAAsB,CAAK,IAAI,CAACf,EAAIO,GAAG,SAASL,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQb,EAAIwC,eAAe,CAACxC,EAAIO,GAAG,UAAU,IAAI,GAAGL,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,QAAUL,EAAIyC,mBAAmB5B,GAAG,CAAC,iBAAiB,SAASC,GAAQd,EAAIyC,kBAAkB3B,CAAM,EAAE,MAAQ,SAASA,GAAQ,OAAOd,EAAI+B,kBAAkB,WAAW,IAAI,CAAC7B,EAAG,UAAU,CAAC8B,IAAI,WAAW3B,MAAM,CAAC,MAAQL,EAAI0C,SAAS,MAAQ1C,EAAIkC,MAAM,cAAc,GAAG,cAAc,UAAU,CAAChC,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,OAAO,aAAe,OAAO8B,MAAM,CAACxB,MAAOX,EAAI0C,SAASN,SAAUC,SAAS,SAAUC,GAAMtC,EAAIuC,KAAKvC,EAAI0C,SAAU,WAAYJ,EAAI,EAAE1B,WAAW,wBAAwB,IAAI,GAAGV,EAAG,OAAO,CAACE,YAAY,gBAAgBC,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,YAAY,CAACW,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIyC,mBAAoB,CAAK,IAAI,CAACzC,EAAIO,GAAG,SAASL,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWQ,GAAG,CAAC,MAAQb,EAAI2C,aAAa,CAAC3C,EAAIO,GAAG,UAAU,IAAI,IAAI,EACj7G,EACIqC,EAAkB,G,oBCiEtB,GAEAnC,KAAA,OACAoC,OACA,OACA7B,UAAA,GAEAD,qBAAA,EACAkB,WAAA,CACAG,SAAA,GACAX,aAAA,IAAAqB,MAAAC,iBACArB,aAAA,IAAAoB,MAAAC,kBAGAN,mBAAA,EACAC,SAAA,CACAb,YAAAmB,GAGAC,YAAA,GACAf,MAAA,CACAE,SAAA,CACA,CAAAc,UAAA,EAAAC,QAAA,WAAAC,QAAA,UAIA,EACAC,UACA,KAAAC,UACA,EACAC,SAAA,CAGAhC,kBACA,OAAAiC,GAGA,IAAAV,KAAAU,GAAAT,gBAEA,GAEAU,QAAA,CAEA,iBACA,WAAAC,EAAA,IAAAC,EAAA,KAAAd,SAAAe,EAAAA,GAAAA,KAAA,CAAAC,SAAA,MACAH,IACA,KAAA1C,UAAA6B,EAEA,EAEAL,eAEA,KAAAsB,MAAA7B,WAAA8B,UAAA,UACA,GAAAC,EAAA,CACA,WAAAN,EAAA,IAAAC,EAAA,KAAAd,SAAAe,EAAAA,GAAAA,OAAA,SAAA3B,aACAyB,GAIA,KAAA1C,UAAAiD,KAAA,SAAAhC,cAAAY,IAEA,KAAA9B,qBAAA,EAEA,KAAAmD,SAAAC,QAAAR,IAEA,KAAAO,SAAAE,MAAAT,EAEA,IAEA,EAEA5B,kBAAAsC,GAGA,KAAAP,MAAAO,GAAAC,aACA,EAEA3C,eAAA4C,GAEA,KAAAtB,YAAAsB,EAGA,KAAA7B,SAAA,IAAA6B,GAEA,KAAA9B,mBAAA,CACA,EAEA,mBACA,WAAAZ,GAAA,KAAAa,SAGA,IACA,IAAAsB,QAAA,KAAAF,MAAApB,SAAAqB,WACA,GAAAC,EAAA,CACA,WAAAN,EAAA,IAAAC,SAAAC,EAAAA,GAAAA,KAAA/B,EAAA,SAAAa,WACAgB,GAKAc,OAAAC,OAAA,KAAAxB,YAAA,KAAAP,UACA,KAAAO,YAAAvB,aAAA,IAAAoB,MAAAC,iBAEA,KAAAN,mBAAA,EAEA,KAAAyB,SAAAC,QAAAR,IAEA,KAAAO,SAAAE,MAAAT,EAEA,CACA,OAAAS,GACAM,QAAAC,IAAAP,EACA,CACA,EAEAxC,aAAAgD,EAAAC,GAGA,KAAAC,SAAA,6BACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YACAC,MAAA,UAGA,WAAAxB,EAAA,IAAAC,SAAAC,EAAAA,GAAAA,OAAAgB,GACAlB,GAEA,KAAA1C,UAAAmE,OAAAN,EAAA,GAEA,KAAAX,SAAA,CACAe,KAAA,UACA9B,QAAAQ,KAGA,KAAAO,SAAAE,MAAAT,EACA,IAEAyB,OAAA,KACA,KAAAlB,SAAAmB,KAAA,WAEA,IChN4P,I,UCQxPC,GAAY,OACd,EACAvF,EACA6C,GACA,EACA,KACA,WACA,MAIF,EAAe0C,EAAiB,O","sources":["webpack://vue2-cms-admin/./src/views/Article/Tag.vue","webpack://vue2-cms-admin/src/views/Article/Tag.vue","webpack://vue2-cms-admin/./src/views/Article/Tag.vue?4d07","webpack://vue2-cms-admin/./src/views/Article/Tag.vue?90b2"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"list_head\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"标签列表\")]),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('article:tag:create'),expression:\"'article:tag:create'\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.insertDialogVisible = true}}},[_vm._v(\"添加标签\")])],1),_c('el-table',{attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"tag_id\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"tag_name\",\"label\":\"标签名称\"}}),_c('el-table-column',{attrs:{\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.loacleTimestamp(scope.row.create_date))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"编辑时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.loacleTimestamp(scope.row.update_date))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('article:tag:edit'),expression:\"'article:tag:edit'\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openEditDialog(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('article:tag:remove'),expression:\"'article:tag:remove'\"}],attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleRemove(scope.row.tag_id, scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加标签\",\"visible\":_vm.insertDialogVisible},on:{\"update:visible\":function($event){_vm.insertDialogVisible=$event},\"close\":function($event){return _vm.handleCloseDialog('insertForm')}}},[_c('el-form',{ref:\"insertForm\",attrs:{\"model\":_vm.insertForm,\"rules\":_vm.rules,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"标签名称\",\"prop\":\"tag_name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.insertForm.tag_name),callback:function ($$v) {_vm.$set(_vm.insertForm, \"tag_name\", $$v)},expression:\"insertForm.tag_name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.insertDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleInsert}},[_vm._v(\"添 加\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑标签\",\"visible\":_vm.editDialogVisible},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":function($event){return _vm.handleCloseDialog('editForm')}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.rules,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"标签名称\",\"prop\":\"tag_name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.editForm.tag_name),callback:function ($$v) {_vm.$set(_vm.editForm, \"tag_name\", $$v)},expression:\"editForm.tag_name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleEdit}},[_vm._v(\"保 存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<el-card class=\"box-card\">\r\n\t\t<div class=\"list_head\" slot=\"header\">\r\n\t\t\t<span>标签列表</span>\r\n\t\t\t<el-button v-permission=\"'article:tag:create'\" @click=\"insertDialogVisible = true\" type=\"primary\"\r\n\t\t\t\ticon=\"el-icon-circle-plus-outline\" plain size=\"mini\">添加标签</el-button>\r\n\t\t</div>\r\n\t\t<el-table :data=\"tableData\">\r\n\t\t\t<el-table-column prop=\"tag_id\" label=\"#\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"tag_name\" label=\"标签名称\">\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"创建时间\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t{{ loacleTimestamp(scope.row.create_date) }}\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"编辑时间\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t{{ loacleTimestamp(scope.row.update_date) }}\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\">\r\n\t\t\t\t<!-- template插槽 内部放复杂结构 必须加slot-scope=\"scope\"-->\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button v-permission=\"'article:tag:edit'\" @click=\"openEditDialog(scope.row)\" type=\"primary\"\r\n\t\t\t\t\t\ticon=\"el-icon-edit\" plain size=\"mini\">编辑</el-button>\r\n\t\t\t\t\t<!-- scope.$index 用来获取索引==>element框架文档中得知 -->\r\n\t\t\t\t\t<el-button v-permission=\"'article:tag:remove'\" @click=\"handleRemove(scope.row.tag_id, scope.$index)\"\r\n\t\t\t\t\t\tplain size=\"mini\" icon=\"el-icon-delete\" type=\"danger\">删除</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\r\n\t\t<!-- 下面两个弹窗结构是相同的，可以封装成一个，但是耦合度高，不易于阅读 -->\r\n\t\t<!-- 添加标签 -->\r\n\t\t<el-dialog title=\"添加标签\" :visible.sync=\"insertDialogVisible\" @close=\"handleCloseDialog('insertForm')\">\r\n\t\t\t<el-form :model=\"insertForm\" :rules=\"rules\" ref=\"insertForm\" status-icon label-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"标签名称\" prop=\"tag_name\">\r\n\t\t\t\t\t<el-input type=\"text\" v-model=\"insertForm.tag_name\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"insertDialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<!-- scope.row 为这一行的数据 -->\r\n\t\t\t\t<el-button @click=\"handleInsert\" type=\"primary\">添 加</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 编辑标签 -->\r\n\t\t<el-dialog title=\"编辑标签\" :visible.sync=\"editDialogVisible\" @close=\"handleCloseDialog('editForm')\">\r\n\t\t\t<el-form :model=\"editForm\" :rules=\"rules\" ref=\"editForm\" status-icon label-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"标签名称\" prop=\"tag_name\">\r\n\t\t\t\t\t<el-input type=\"text\" v-model=\"editForm.tag_name\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button @click=\"handleEdit\" type=\"primary\">保 存</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</el-card>\r\n</template>\r\n\r\n<script>\r\nimport { Tag } from '@/api';\r\n\r\nexport default {\r\n\t// name属性 -- 帮助快速搜索组件\r\n\tname: \"List\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttableData: [],\r\n\t\t\t// 插入标签弹窗\r\n\t\t\tinsertDialogVisible: false,\r\n\t\t\tinsertForm: {\r\n\t\t\t\ttag_name: '',\r\n\t\t\t\tcreate_date: new Date().toLocaleString(),\r\n\t\t\t\tupdate_date: new Date().toLocaleString(),\r\n\t\t\t},\r\n\t\t\t// 编辑标签弹窗\r\n\t\t\teditDialogVisible: false,\r\n\t\t\teditForm: {\r\n\t\t\t\ttag_id: undefined,\r\n\t\t\t},\r\n\t\t\t// 缓存当前编辑的数据 -- 指针地址\r\n\t\t\tcurrent_tag: '',\r\n\t\t\trules: {\r\n\t\t\t\ttag_name: [\r\n\t\t\t\t\t{ required: true, message: '请输入标签名称！', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.loadList();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 表达属性时，表达式很长，可用计算属性\r\n\t\t// 计算属性传参 ==> return一个函数\r\n\t\tloacleTimestamp() {\r\n\t\t\treturn (timestamp) => {\r\n\t\t\t\t// \"2023-02-27T02:17:49.000Z\" 对于后台返回的这种时间，可让后台处理成正常时间，\r\n\t\t\t\t// 或者使用 new Date() 里面的 toLocaleString() 方法处理\r\n\t\t\t\treturn new Date(timestamp).toLocaleString()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 加载标签列表\r\n\t\tasync loadList() {\r\n\t\t\tlet { status, msg, data } = await Tag.list({ pagesize: 100 });\r\n\t\t\tif (status) {\r\n\t\t\t\tthis.tableData = data;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 添加标签\r\n\t\thandleInsert() {\r\n\t\t\t// 通过$resfs 找到 insertForm\r\n\t\t\tthis.$refs.insertForm.validate(async (valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tlet { status, msg, data } = await Tag.create({ ...this.insertForm });\r\n\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\t// 添加标签 \r\n\t\t\t\t\t\t// 因为 insertForm 为单层对象，所以浅拷贝即可，若是嵌套数组或者嵌套对象则需要深拷贝。\r\n\t\t\t\t\t\t// 后台返回的 data数据 中 有 tag_id \r\n\t\t\t\t\t\tthis.tableData.push({ ...this.insertForm, ...data });\r\n\t\t\t\t\t\t// 关闭弹窗\r\n\t\t\t\t\t\tthis.insertDialogVisible = false;\r\n\t\t\t\t\t\t// 信息提示\r\n\t\t\t\t\t\tthis.$message.success(msg);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// dialog组件的事件方法 ===> 所以点击事件写在组件上 ==> 去除上次表单验证的效果\r\n\t\thandleCloseDialog(formName) {\r\n\t\t\t// this.$refs.this.insertForm.resetFields();\r\n\t\t\t// 因为页面有两个表单，所以使用传参的方法。\r\n\t\t\tthis.$refs[formName].resetFields();\r\n\t\t},\r\n\t\t// 打开编辑弹窗\r\n\t\topenEditDialog(tag_data) {\r\n\t\t\t// 缓存 scope.row 的指针地址 ==> 所以 current_tag 改变的话 ，tag_data也会变。\r\n\t\t\tthis.current_tag = tag_data;\r\n\t\t\t// 还原表单数据 ==> 把表单数据还原到 编辑弹窗 中。\r\n\t\t\t// 此处浅拷贝 ==> 断开与表格的数据的双向绑定 ==> 不然修改时未点击保存，表格数据也会随之变化。\r\n\t\t\tthis.editForm = { ...tag_data };\r\n\t\t\t// 打开弹窗\r\n\t\t\tthis.editDialogVisible = true;\r\n\t\t},\r\n\t\t// 编辑标签\r\n\t\tasync handleEdit() {\r\n\t\t\tlet { tag_id } = this.editForm;\r\n\t\t\t// 表单验证的第二种写法 ==> 参考 Element UI ==> validate中不传入参数(即回调函数)时\r\n\t\t\t// 则会返回一个 promise ==> 可使用 try catch 捕获成功与失败 \r\n\t\t\ttry {\r\n\t\t\t\tlet valid = await this.$refs.editForm.validate();\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tlet { status, msg } = await Tag.edit(tag_id, { ...this.editForm });\r\n\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\t// 保存修改后的标签 -- 操作DOM\r\n\t\t\t\t\t\t// 需要让 vue 监测到我们修改了DOM -- 动态属性 -- set()/get()\r\n\t\t\t\t\t\t// 而 Object.assign 合并对象时，就会调用 set()/get() 方法\r\n\t\t\t\t\t\t// 调用目标对象的set方法修改（合并）数据到目标对象，调用源对象的get方法获取源对象数据\r\n\t\t\t\t\t\tObject.assign(this.current_tag, this.editForm);// 编辑时间未更新\r\n\t\t\t\t\t\tthis.current_tag.update_date = new Date().toLocaleString();\r\n\t\t\t\t\t\t// 关闭弹窗\r\n\t\t\t\t\t\tthis.editDialogVisible = false;\r\n\t\t\t\t\t\t// 信息提示\r\n\t\t\t\t\t\tthis.$message.success(msg);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 删除标签\r\n\t\thandleRemove(id, i) {\r\n\t\t\t// 查阅文档 -- $confirm 返回一个 promise 对象 ==> 所以用 .then .catch 分别捕获。\r\n\t\t\t// 也可以 使用 async await ==> try catch 捕获\r\n\t\t\tthis.$confirm('此操作将永久删除该标签, 是否继续?', '确认删除', {\r\n\t\t\t\tconfirmButtonText: '删除',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(async () => {\r\n\t\t\t\t// 删除标签 -- 需要 tag_id ==>在scope.row中 ==> 所以传一个参数,即tag_id\r\n\t\t\t\t// 这是 delete 请求，id 是要求传入的参数\r\n\t\t\t\tlet { status, msg } = await Tag.remove(id);\r\n\t\t\t\tif (status) {\r\n\t\t\t\t\t// 后台数据已经删除 -- 但是页面并未更新 -- 需要操作DOM -- 删除\r\n\t\t\t\t\tthis.tableData.splice(i, 1);\r\n\t\t\t\t\t// 信息提示 ==> this.$message.success(msg);\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(msg);\r\n\t\t\t\t}\r\n\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tthis.$message.info('已取消删除');\r\n\t\t\t});\r\n\t\t},\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.list_head {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tag.vue?vue&type=template&id=7cd5b710&scoped=true&\"\nimport script from \"./Tag.vue?vue&type=script&lang=js&\"\nexport * from \"./Tag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tag.vue?vue&type=style&index=0&id=7cd5b710&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7cd5b710\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","directives","name","rawName","value","expression","on","$event","insertDialogVisible","tableData","scopedSlots","_u","key","fn","scope","_s","loacleTimestamp","row","create_date","update_date","openEditDialog","handleRemove","tag_id","$index","handleCloseDialog","ref","insertForm","rules","model","tag_name","callback","$$v","$set","handleInsert","editDialogVisible","editForm","handleEdit","staticRenderFns","data","Date","toLocaleString","undefined","current_tag","required","message","trigger","created","loadList","computed","timestamp","methods","status","msg","Tag","pagesize","$refs","validate","valid","push","$message","success","error","formName","resetFields","tag_data","Object","assign","console","log","id","i","$confirm","confirmButtonText","cancelButtonText","type","then","splice","catch","info","component"],"sourceRoot":""}