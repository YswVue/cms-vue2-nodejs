{"version":3,"file":"js/978.d0219dea.js","mappings":"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","sources":["webpack://vue2-cms-admin/./src/components/Img-upload.vue","webpack://vue2-cms-admin/src/components/Img-upload.vue","webpack://vue2-cms-admin/./src/components/Img-upload.vue?ffa4","webpack://vue2-cms-admin/./src/components/Img-upload.vue?2698","webpack://vue2-cms-admin/./src/views/Article/Release.vue","webpack://vue2-cms-admin/src/views/Article/Release.vue","webpack://vue2-cms-admin/./src/views/Article/Release.vue?16b5","webpack://vue2-cms-admin/./src/views/Article/Release.vue?9c58"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"on-success\":_vm.handleUploadSuccess,\"on-error\":_vm.handleUploadError,\"before-upload\":_vm.beforeAvatarUpload,\"accept\":\"image/*\",\"show-file-list\":false,\"data\":_vm.data,\"action\":_vm.action,\"headers\":_vm.headers}},[(_vm.picture)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.picture}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <!-- 这一块无axios的辅助功能 -- 麻烦QAQ ===> 上传图片功能，在项目中经常用到，这种应该封装成一个组件 -->\r\n    <!--  action=\"/upload/common/\" ==> 后台接口地址 -- 上传地址 -->\r\n    <!-- action 地址要完整的后台地址 http://localhost:3001/upload/common/ -->\r\n    <!-- 但此处是 经过elementUI 封装的图片上传组件 -- 未经过axios -- 所以不涉及请求拦截器 -- 无header头 -- 所以要设置header头 -- 看elementUI文档 -->\r\n    <!-- headers设置在data()中，简化一下 -->\r\n    <!-- v-bind指令（即:）对于数据类型的绑定特别好用 -->\r\n    <el-upload :on-success=\"handleUploadSuccess\" :on-error=\"handleUploadError\" :before-upload=\"beforeAvatarUpload\"\r\n        accept=\"image/*\" :show-file-list=\"false\" :data=\"data\" :action=\"action\" :headers=\"headers\" class=\"avatar-uploader\">\r\n        <img v-if=\"picture\" :src=\"picture\" class=\"avatar\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    // model ==> 对象数组形式，多个事件?\r\n    model: {\r\n        prop: 'picture',\r\n        event: 'change'\r\n    },\r\n    props: {\r\n        data: {\r\n            type: Object,\r\n            default: () => {\r\n                return { type: 'common' };\r\n            }\r\n        },\r\n        headers: {\r\n            type: Object,\r\n            default: () => {\r\n                return { Authorization: `Bearer ${sessionStorage.access_token}` };\r\n            }\r\n        },\r\n        action: {\r\n            type: String,\r\n            default: `${process.env.VUE_APP_SERVER}/upload/common/`,\r\n        },\r\n        picture: {\r\n            type: String,\r\n            default: '',\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        // 文件上传前的钩子\r\n        // element 框架文档 -- 长传头像前的操作 -- 一般就是判断一遍图片是否合规\r\n        beforeAvatarUpload(file) {\r\n            // 打印 file 一下 ==> 显示file是上传的图片对象，包含图片的各种信息。 \r\n\r\n            // 此处使用一个正则限制图片格式\r\n            let reg = /^image\\/(jpeg||png)$/;\r\n            const isJPG = reg.test(file.type);\r\n            // 限制图片大小 小于两兆\r\n            const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n            if (!isJPG) {\r\n                this.$message.error('上传头像图片只能是 JPG 格式!');\r\n            }\r\n            if (!isLt2M) {\r\n                this.$message.error('上传头像图片大小不能超过 2MB!');\r\n            }\r\n            // 两个限制条件都合规，才会返回 true\r\n            return isJPG && isLt2M;\r\n        },\r\n        // 文件上传失败的时的钩子\r\n        handleUploadError(error, file, fileList) {\r\n            // console.dir(error)\r\n            // 添加了 状态码 报错信息提示\r\n            // 此处 应用了 解构起别名\r\n            let { status, message } = error;\r\n            switch (status) {\r\n                case 400:\r\n                    // 因为 error.message 是混杂了其他字符的字符串，但我们只想要其中的提示信息。\r\n                    // 所以 用 JSON.parse 把 error.message 转化为 对象去使用。\r\n                    let { status, msg } = JSON.parse(message);\r\n                    // 信息提示\r\n                    this.$message.error(msg);\r\n                    break;\r\n                case 401:\r\n                    let { code } = JSON.parse(message);\r\n                    this.$message.error(`错误代码401,${code},请重新登录`);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n        // 文件上传成功时的钩子\r\n        handleUploadSuccess(response, file, fileList) {\r\n            let { status, msg, src } = response;\r\n            if (status) {\r\n                // 预览图片\r\n                this.$emit('change', src);\r\n                // 信息提示\r\n                this.$message.success(msg);\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.avatar-uploader .el-upload {\r\n    border: 2px solid #111010;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n}\r\n\r\n.avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Img-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Img-upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Img-upload.vue?vue&type=template&id=b38c2fa8&scoped=true&\"\nimport script from \"./Img-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./Img-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Img-upload.vue?vue&type=style&index=0&id=b38c2fa8&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b38c2fa8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-card',{staticClass:\"box-card\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"发布文章\")])]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-select',{attrs:{\"placeholder\":\"请选择一级分类\"},model:{value:(_vm.form.cate_1st),callback:function ($$v) {_vm.$set(_vm.form, \"cate_1st\", $$v)},expression:\"form.cate_1st\"}},_vm._l((_vm.cate_1st_options),function(item){return _c('el-option',{key:item.cate_id,attrs:{\"label\":item.cate_name,\"value\":item.cate_id}})}),1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-select',{attrs:{\"placeholder\":\"请选择二级分类\"},model:{value:(_vm.form.cate_2nd),callback:function ($$v) {_vm.$set(_vm.form, \"cate_2nd\", $$v)},expression:\"form.cate_2nd\"}},_vm._l((_vm.cate_2nd_options),function(item){return _c('el-option',{key:item.cate_id,attrs:{\"label\":item.cate_name,\"value\":item.cate_id}})}),1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"图片\",\"prop\":\"main_photo\"}},[_c('ImgUpload',{model:{value:(_vm.form.main_photo),callback:function ($$v) {_vm.$set(_vm.form, \"main_photo\", $$v)},expression:\"form.main_photo\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容\",\"prop\":\"content\"}},[_c('txtEditor',{attrs:{\"content\":_vm.form.content},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, \"content\", $$v)},expression:\"form.content\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleRelease}},[_vm._v(\"发布文章\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<el-card class=\"box-card\">\r\n\t\t<div slot=\"header\">\r\n\t\t\t<span>发布文章</span>\r\n\t\t</div>\r\n\t\t<el-form :model=\"form\" :rules=\"rules\" ref=\"form\" label-width=\"100px\">\r\n\t\t\t<el-form-item label=\"标题\" prop=\"title\">\r\n\t\t\t\t<el-input type=\"text\" v-model=\"form.title\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"描述\" prop=\"description\">\r\n\t\t\t\t<el-input type=\"text\" v-model=\"form.description\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"分类\">\r\n\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t<el-select v-model=\"form.cate_1st\" placeholder=\"请选择一级分类\">\r\n\t\t\t\t\t\t<el-option v-for=\"item in cate_1st_options\" :label=\"item.cate_name\" :value=\"item.cate_id\"\r\n\t\t\t\t\t\t\t:key=\"item.cate_id\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t<el-select v-model=\"form.cate_2nd\" placeholder=\"请选择二级分类\">\r\n\t\t\t\t\t\t<el-option v-for=\"item in cate_2nd_options\" :label=\"item.cate_name\" :value=\"item.cate_id\"\r\n\t\t\t\t\t\t\t:key=\"item.cate_id\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"图片\" prop=\"main_photo\">\r\n\t\t\t\t<ImgUpload v-model=\"form.main_photo\"></ImgUpload>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"内容\" prop=\"content\">\r\n\t\t\t\t<txtEditor v-model=\"form.content\" :content=\"form.content\"></txtEditor>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button @click=\"handleRelease\" type=\"primary\">发布文章</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</el-card>\r\n</template>\r\n\r\n<script>\r\nimport { Article, Category } from '@/api';\r\n\r\n// 引入图片上传组件\r\nimport ImgUpload from '@/components/Img-upload.vue';\r\n// 引入富文本编辑器组件\r\nimport txtEditor from '@/components/txt-editor.vue';\r\n\r\nexport default {\r\n\tname: 'Release',\r\n\tcomponents: {\r\n\t\tImgUpload,\r\n\t\ttxtEditor,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tform: {\r\n\t\t\t\tcate_1st: '',\r\n\t\t\t\tcate_2nd: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tdescription: '',\r\n\t\t\t\tmain_photo: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t},\r\n\t\t\t// 分类列表\r\n\t\t\tcate_1st_options: [],\r\n\t\t\tcate_2nd_options: [],\r\n\t\t\t// 表单验证规则\r\n\t\t\trules: {\r\n\t\t\t\tmain_photo: [\r\n\t\t\t\t\t{ required: true, message: '请上传图片！', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\ttitle: [\r\n\t\t\t\t\t{ required: true, message: '请输入文章标题！', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tdescription: [\r\n\t\t\t\t\t{ required: true, message: '请输入文章描述！', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{ required: true, message: '请输入文章内容！', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tasync created() {\r\n\t\t// 加载一级分类 ==> await 捕获promise对象（data） ==>.then方法的语法糖\r\n\t\tthis.cate_1st_options = await this.loadSubcate(0);\r\n\t\t// 默认选中第一项\r\n\t\tthis.form.cate_1st = this.cate_1st_options[0]?.cate_id;\r\n\t},\r\n\twatch: {\r\n\t\t// 当一级列表 cate_1st 发生变化，就发送Ajax请求叶子结点\r\n\t\t// watch监听 -- 此处：监听对象内部单个属性变化\r\n\t\t'form.cate_1st': async function (newValue, oldValue) {\r\n\t\t\t// 加载二级分类\r\n\t\t\tthis.cate_2nd_options = await this.loadSubcate(newValue);\r\n\t\t\t// 默认选择第一项\r\n\t\t\t// 二级列表可能不存在，要判断一下 -- 因为数组为空的话，cate_2nd_options[0].cate_id ，内部这个属性就不存在，undefined\r\n\t\t\t// if (this.cate_2nd_options !== []) {\r\n\t\t\t// \tthis.form.cate_2nd = this.cate_2nd_options[0].cate_id;\r\n\t\t\t// }\r\n\r\n\t\t\t// ES6 语法， ==> 处理 undefined 读取等问题 ==> ?运算\r\n\t\t\tthis.form.cate_2nd = this.cate_2nd_options[0]?.cate_id;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 加载子级分类\r\n\t\tasync loadSubcate(cate_id) {\r\n\t\t\tlet { status, msg, data } = await Category.subCate({ cate_id });\r\n\t\t\tif (status) {\r\n\t\t\t\t// 此处只管请求数据，操作赋值交给外面。\r\n\t\t\t\treturn data; //return 出去的数据都会转为 promise 对象\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 发布文章\r\n\t\tasync handleRelease() {\r\n\t\t\t// 表单验证的第二种写法 ==> 参考 Element UI ==> validate中不传入参数(即回调函数)时\r\n\t\t\t// 则会返回一个 promise ==> 可使用 try catch 捕获成功与失败 \r\n\t\t\ttry {\r\n\t\t\t\tlet valid = await this.$refs.form.validate();\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tlet { status, msg } = await Article.release({ ...this.form });\r\n\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\t// 信息提示\r\n\t\t\t\t\t\tthis.$message.success(msg);\r\n\t\t\t\t\t\t// 页面跳转\r\n\t\t\t\t\t\tthis.$router.push('/article/list');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.$message.error(error);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Release.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Release.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Release.vue?vue&type=template&id=361b9062&scoped=true&\"\nimport script from \"./Release.vue?vue&type=script&lang=js&\"\nexport * from \"./Release.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"361b9062\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","handleUploadSuccess","handleUploadError","beforeAvatarUpload","data","action","headers","picture","staticRenderFns","model","prop","event","props","type","Object","default","Authorization","sessionStorage","access_token","String","methods","file","reg","isJPG","test","isLt2M","size","$message","error","fileList","status","message","msg","JSON","parse","code","response","src","$emit","success","component","slot","_v","ref","form","rules","value","title","callback","$$v","$set","expression","description","cate_1st","_l","cate_1st_options","item","key","cate_id","cate_name","cate_2nd","cate_2nd_options","main_photo","content","on","handleRelease","name","components","ImgUpload","txtEditor","required","trigger","loadSubcate","watch","newValue","oldValue","Category","valid","$refs","validate","Article","$router","push"],"sourceRoot":""}