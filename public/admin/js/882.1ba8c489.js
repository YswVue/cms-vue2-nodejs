"use strict";(self["webpackChunkvue2_cms_admin"]=self["webpackChunkvue2_cms_admin"]||[]).push([[882],{5882:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var o=function(){var e=this,t=e._self._c;return t("el-card",[t("el-row",{staticClass:"row-bg",attrs:{slot:"header",type:"flex",justify:"space-between"},slot:"header"},[t("span",[e._v("路由管理")])]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tree_data,"row-key":"route_id"}},[t("el-table-column",{attrs:{fixed:"",label:"路由名称",prop:"route_name",width:"180"}}),t("el-table-column",{attrs:{label:"#",prop:"route_id",type:"index"}}),t("el-table-column",{attrs:{prop:"route_title",label:"显示标题"}}),t("el-table-column",{attrs:{prop:"route_path",label:"路由地址",width:"120"}}),t("el-table-column",{attrs:{prop:"route_full_path",label:"完整路由地址",width:"160"}}),t("el-table-column",{attrs:{prop:"component_name",label:"组件名称"}}),t("el-table-column",{attrs:{prop:"component_path",label:"组件路径",width:"240"}}),t("el-table-column",{attrs:{prop:"route_alias",label:"路由别名"}}),t("el-table-column",{attrs:{prop:"permission_remark",label:"备注"}}),t("el-table-column",{attrs:{label:"登录状态"},scopedSlots:e._u([{key:"default",fn:function(r){return[1===r.row.require_auth?t("el-tag",{attrs:{type:"warning"}},[e._v("认证")]):t("el-tag",{attrs:{type:"success"}},[e._v("对外公开")])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:route:edit",expression:"'system:route:edit'"}],attrs:{plain:"",size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(r.row)}}},[e._v("编辑")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:route:create",expression:"'system:route:create'"}],attrs:{plain:"",size:"mini",type:"success",icon:"el-icon-switch-button"},on:{click:function(t){return e.openInsertDialog(r.row)}}},[e._v("添加")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:route:remove",expression:"'system:route:remove'"}],attrs:{plain:"",size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.handleRemove(r.row,r.$index)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:"添加路由",visible:e.insert_dialog_visible},on:{"update:visible":function(t){e.insert_dialog_visible=t},close:function(t){return e.handleCloseDialog("insert_form")}}},[t("el-form",{ref:"insert_form",attrs:{model:e.insert_form,rules:e.rules,"status-icon":"","label-width":"100px"}},[t("el-form-item",{attrs:{label:"路由标题",prop:"route_title"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.route_title,callback:function(t){e.$set(e.insert_form,"route_title",t)},expression:"insert_form.route_title"}})],1),t("el-form-item",{attrs:{label:"路由名称",prop:"route_name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.route_name,callback:function(t){e.$set(e.insert_form,"route_name",t)},expression:"insert_form.route_name"}})],1),t("el-form-item",{attrs:{label:"路由地址",prop:"route_path"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.route_path,callback:function(t){e.$set(e.insert_form,"route_path",t)},expression:"insert_form.route_path"}})],1),t("el-form-item",{attrs:{label:"父级路有权限ID",prop:"parent_id"}},[t("el-input",{attrs:{type:"text",readonly:"",autocomplete:"off"},model:{value:e.insert_form.parent_id,callback:function(t){e.$set(e.insert_form,"parent_id",t)},expression:"insert_form.parent_id"}})],1),t("el-form-item",{attrs:{label:"完整路由地址",prop:"route_full_path"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.route_full_path,callback:function(t){e.$set(e.insert_form,"route_full_path",t)},expression:"insert_form.route_full_path"}})],1),t("el-form-item",{attrs:{label:"组件名称",prop:"component_name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.component_name,callback:function(t){e.$set(e.insert_form,"component_name",t)},expression:"insert_form.component_name"}})],1),t("el-form-item",{attrs:{label:"组件路径",prop:"component_path"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.component_path,callback:function(t){e.$set(e.insert_form,"component_path",t)},expression:"insert_form.component_path"}})],1),t("el-form-item",{attrs:{label:"路由别名",prop:"route_alias"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.route_alias,callback:function(t){e.$set(e.insert_form,"route_alias",t)},expression:"insert_form.route_alias"}})],1),t("el-form-item",{attrs:{label:"登录状态",prop:"require_auth"}},[t("el-radio-group",{model:{value:e.insert_form.require_auth,callback:function(t){e.$set(e.insert_form,"require_auth",t)},expression:"insert_form.require_auth"}},[t("el-radio",{attrs:{label:"1"}},[e._v("需要认证")]),t("el-radio",{attrs:{label:"2"}},[e._v("对外公开")])],1)],1),t("el-form-item",{attrs:{label:"备注",prop:"permission_remark"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insert_form.permission_remark,callback:function(t){e.$set(e.insert_form,"permission_remark",t)},expression:"insert_form.permission_remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.insert_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleInsert}},[e._v("保 存")])],1)],1),t("el-dialog",{attrs:{title:"编辑路由",visible:e.edit_dialog_visible},on:{"update:visible":function(t){e.edit_dialog_visible=t},close:function(t){return e.handleCloseDialog("edit_form")}}},[t("el-form",{ref:"edit_form",attrs:{model:e.edit_form,rules:e.rules,"status-icon":"","label-width":"100px"}},[t("el-form-item",{attrs:{label:"路由标题",prop:"route_title"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.route_title,callback:function(t){e.$set(e.edit_form,"route_title",t)},expression:"edit_form.route_title"}})],1),t("el-form-item",{attrs:{label:"路由名称",prop:"route_name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.route_name,callback:function(t){e.$set(e.edit_form,"route_name",t)},expression:"edit_form.route_name"}})],1),t("el-form-item",{attrs:{label:"路由地址",prop:"route_path"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.route_path,callback:function(t){e.$set(e.edit_form,"route_path",t)},expression:"edit_form.route_path"}})],1),t("el-form-item",{attrs:{label:"父级路有权限ID",prop:"parent_id"}},[t("el-input",{attrs:{type:"text",readonly:"",autocomplete:"off"},model:{value:e.edit_form.parent_id,callback:function(t){e.$set(e.edit_form,"parent_id",t)},expression:"edit_form.parent_id"}})],1),t("el-form-item",{attrs:{label:"完整路由地址",prop:"route_full_path"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.route_full_path,callback:function(t){e.$set(e.edit_form,"route_full_path",t)},expression:"edit_form.route_full_path"}})],1),t("el-form-item",{attrs:{label:"组件名称",prop:"component_name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.component_name,callback:function(t){e.$set(e.edit_form,"component_name",t)},expression:"edit_form.component_name"}})],1),t("el-form-item",{attrs:{label:"组件路径",prop:"component_path"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.component_path,callback:function(t){e.$set(e.edit_form,"component_path",t)},expression:"edit_form.component_path"}})],1),t("el-form-item",{attrs:{label:"路由别名",prop:"route_alias"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.route_alias,callback:function(t){e.$set(e.edit_form,"route_alias",t)},expression:"edit_form.route_alias"}})],1),t("el-form-item",{attrs:{label:"登录状态",prop:"require_auth"}},[t("el-radio-group",{model:{value:e.edit_form.require_auth,callback:function(t){e.$set(e.edit_form,"require_auth",t)},expression:"edit_form.require_auth"}},[t("el-radio",{attrs:{label:1}},[e._v("需要认证")]),t("el-radio",{attrs:{label:2}},[e._v("对外公开")])],1)],1),t("el-form-item",{attrs:{label:"备注",prop:"permission_remark"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.edit_form.permission_remark,callback:function(t){e.$set(e.edit_form,"permission_remark",t)},expression:"edit_form.permission_remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.edit_dialog_visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保 存")])],1)],1)],1)},i=[],a=r(3822),l={data(){return{edit_dialog_visible:!1,insert_dialog_visible:!1,insert_form:{route_title:"",route_name:"",route_path:"",parent_id:"",route_full_path:"",component_name:"",component_path:"",route_alias:"",require_auth:"1",permission_remark:""},edit_form:{route_title:"",route_name:"",route_path:"",parent_id:"",route_full_path:"",component_name:"",component_path:"",route_alias:"",require_auth:"",permission_remark:""},current_route:"",rules:{route_title:[{required:!0,message:"请输入标签名",trigger:"blur"}],route_name:[{required:!0,message:"请输入标签名",trigger:"blur"}],route_path:[{required:!0,message:"请输入标签名",trigger:"blur"}],parent_id:[{required:!0,message:"请输入标签名",trigger:"blur"}],route_full_path:[{required:!0,message:"请输入标签名",trigger:"blur"}],component_name:[{required:!0,message:"请输入标签名",trigger:"blur"}],component_path:[{required:!0,message:"请输入标签名",trigger:"blur"}],route_alias:[{required:!0,message:"请输入标签名",trigger:"blur"}],require_auth:[{required:!0,message:"请输入标签名",trigger:"blur"}],permission_remark:[{required:!0,message:"请输入标签名",trigger:"blur"}]}}},computed:{...(0,a.rn)("route",["flat_data"]),...(0,a.Se)("route",["tree_data"])},watch:{"insert_form.route_path":function(e,t){let r=this.flat_data.filter((e=>e.route_id===this.insert_form.parent_id));0===r.route_id?this.insert_form.route_full_path=this.insert_form.route_path:this.insert_form.route_full_path=`${r[0].route_path}/${e}`},"edit_form.route_path"(e,t){let r=this.flat_data.filter((e=>e.route_id===this.edit_form.parent_id));0===this.edit_form.parent_id?this.edit_form.route_full_path=this.edit_form.route_path:this.edit_form.route_full_path=`${r[0].route_full_path}/${e}`}},methods:{...(0,a.nv)("route",["load_list","insert_route","edit_route","remove_route"]),openEditDialog(e){this.current_route=e,this.edit_form={...e},this.edit_dialog_visible=!0},openInsertDialog(e){this.insert_dialog_visible=!0,this.insert_form.parent_id=e.route_id},handleInsert(){this.$refs.insert_form.validate((async e=>{if(e){let{status:e,msg:t,data:r}=await this.insert_route({...this.insert_form});e?(this.insert_dialog_visible=!1,this.$message.success(t)):this.$message.error(t)}}))},async handleEdit(){this.$refs.edit_form.validate((async e=>{if(e){let{status:e,msg:t}=await this.edit_route({...this.edit_form});e&&(Object.assign(this.current_route,this.edit_form),this.$message.success(t),this.edit_dialog_visible=!1)}}))},handleCloseDialog(e){this.$refs[e].resetFields()},handleRemove(e,t){this.$confirm("此操作将永久删除该标签, 是否继续?","确认删除",{type:"warning"}).then((async()=>{let{status:r,msg:o}=await this.remove_route({route:e,index:t});r?this.$message.success(o):this.$message.error(o)})).catch((()=>{this.$message.info("已取消删除")}))}},created(){this.load_list()}},s=l,n=r(1001),u=(0,n.Z)(s,o,i,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=882.1ba8c489.js.map