{"version":3,"file":"js/316.15e2e440.js","mappings":"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","sources":["webpack://vue2-cms-admin/./src/views/Promotion/Link.vue","webpack://vue2-cms-admin/src/views/Promotion/Link.vue","webpack://vue2-cms-admin/./src/views/Promotion/Link.vue?ccea","webpack://vue2-cms-admin/./src/views/Promotion/Link.vue?4c97"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"list_head\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"链接列表\")]),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('promotion:link:create'),expression:\"'promotion:link:create'\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.insertDialogVisible = true}}},[_vm._v(\"添加链接\")])],1),_c('el-table',{attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"link_id\",\"label\":\"#\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"链接标题\"}}),_c('el-table-column',{attrs:{\"label\":\"网站地址\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{attrs:{\"href\":scope.row.url,\"target\":\"_blank\",\"underline\":false}},[_vm._v(_vm._s(scope.row.url))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"link_order\",\"label\":\"排序数字\"}}),_c('el-table-column',{attrs:{\"prop\":\"usable\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.usable === -1)?_c('el-tag',{attrs:{\"type\":\"info\",\"plain\":\"\",\"disabled\":\"\",\"size\":\"mini\"}},[_vm._v(\"禁用\")]):_c('el-tag',{attrs:{\"type\":\"success\",\"plain\":\"\",\"size\":\"mini\"}},[_vm._v(\"启用\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"create_time\",\"label\":\"添加日期\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('promotion:link:edit'),expression:\"'promotion:link:edit'\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openEditDialog(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('promotion:link:switch'),expression:\"'promotion:link:switch'\"}],attrs:{\"type\":scope.row.usable === 1 ? 'info' : 'success',\"icon\":\"el-icon-switch-button\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleOpen(scope.row.link_id, scope.$index)}}},[_vm._v(_vm._s(scope.row.usable == -1 ? '启用' : '禁用'))]),_c('el-button',{directives:[{name:\"permission\",rawName:\"v-permission\",value:('promotion:link:remove'),expression:\"'promotion:link:remove'\"}],attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleRemove(scope.row.link_id, scope.$index)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加标签\",\"visible\":_vm.insertDialogVisible},on:{\"update:visible\":function($event){_vm.insertDialogVisible=$event},\"close\":function($event){return _vm.handleCloseDialog('insertForm')}}},[_c('el-form',{ref:\"insertForm\",attrs:{\"model\":_vm.insertForm,\"rules\":_vm.rules,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"链接标题\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.insertForm.title),callback:function ($$v) {_vm.$set(_vm.insertForm, \"title\", $$v)},expression:\"insertForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"链接地址\",\"prop\":\"url\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.insertForm.url),callback:function ($$v) {_vm.$set(_vm.insertForm, \"url\", $$v)},expression:\"insertForm.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"显示顺序\",\"prop\":\"link_order\"}},[_c('el-input',{attrs:{\"type\":\"number\",\"autocomplete\":\"off\"},model:{value:(_vm.insertForm.link_order),callback:function ($$v) {_vm.$set(_vm.insertForm, \"link_order\", $$v)},expression:\"insertForm.link_order\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.insertDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleInsert}},[_vm._v(\"添 加\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑标签\",\"visible\":_vm.editDialogVisible},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":function($event){return _vm.handleCloseDialog('editForm')}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.rules,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"链接标题\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.editForm.title),callback:function ($$v) {_vm.$set(_vm.editForm, \"title\", $$v)},expression:\"editForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"链接地址\",\"prop\":\"url\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.editForm.url),callback:function ($$v) {_vm.$set(_vm.editForm, \"url\", $$v)},expression:\"editForm.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"显示顺序\",\"prop\":\"link_order\"}},[_c('el-input',{attrs:{\"type\":\"number\",\"autocomplete\":\"off\"},model:{value:(_vm.editForm.link_order),callback:function ($$v) {_vm.$set(_vm.editForm, \"link_order\", $$v)},expression:\"editForm.link_order\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleEdit}},[_vm._v(\"保 存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-card class=\"box-card\">\r\n        <div class=\"list_head\" slot=\"header\">\r\n            <span>链接列表</span>\r\n            <el-button v-permission=\"'promotion:link:create'\" @click=\"insertDialogVisible = true\" type=\"primary\"\r\n                icon=\"el-icon-circle-plus-outline\" plain size=\"mini\">添加链接</el-button>\r\n        </div>\r\n        <el-table :data=\"tableData\">\r\n            <el-table-column prop=\"link_id\" label=\"#\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"title\" label=\"链接标题\">\r\n            </el-table-column>\r\n            <el-table-column label=\"网站地址\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-link :href=\"scope.row.url\" target=\"_blank\" :underline=\"false\">{{ scope.row.url }}</el-link>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"link_order\" label=\"排序数字\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"usable\" label=\"状态\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag v-if=\"scope.row.usable === -1\" type=\"info\" plain disabled size=\"mini\">禁用</el-tag>\r\n                    <el-tag v-else type=\"success\" plain size=\"mini\">启用</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"create_time\" label=\"添加日期\">\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"300\">\r\n                <!-- template插槽 内部放复杂结构 必须加slot-scope=\"scope\"-->\r\n                <template slot-scope=\"scope\">\r\n                    <el-button v-permission=\"'promotion:link:edit'\" @click=\"openEditDialog(scope.row)\" type=\"primary\"\r\n                        icon=\"el-icon-edit\" plain size=\"mini\">编辑</el-button>\r\n                    <el-button v-permission=\"'promotion:link:switch'\" @click=\"handleOpen(scope.row.link_id, scope.$index)\"\r\n                        :type=\"scope.row.usable === 1 ? 'info' : 'success'\" icon=\"el-icon-switch-button\" plain\r\n                        size=\"mini\">{{ scope.row.usable == -1 ? '启用' : '禁用'\r\n                        }}</el-button>\r\n                    <el-button v-permission=\"'promotion:link:remove'\" @click=\"handleRemove(scope.row.link_id, scope.$index)\"\r\n                        plain size=\"mini\" icon=\"el-icon-delete\" type=\"danger\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 添加标签 -->\r\n        <el-dialog title=\"添加标签\" :visible.sync=\"insertDialogVisible\" @close=\"handleCloseDialog('insertForm')\">\r\n            <el-form :model=\"insertForm\" :rules=\"rules\" ref=\"insertForm\" status-icon label-width=\"100px\">\r\n                <el-form-item label=\"链接标题\" prop=\"title\">\r\n                    <el-input type=\"text\" v-model=\"insertForm.title\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"链接地址\" prop=\"url\">\r\n                    <el-input type=\"text\" v-model=\"insertForm.url\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"显示顺序\" prop=\"link_order\">\r\n                    <el-input type=\"number\" v-model=\"insertForm.link_order\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"insertDialogVisible = false\">取 消</el-button>\r\n                <el-button @click=\"handleInsert\" type=\"primary\">添 加</el-button>\r\n            </span>\r\n        </el-dialog>\r\n\r\n        <!-- 编辑 -->\r\n        <el-dialog title=\"编辑标签\" :visible.sync=\"editDialogVisible\" @close=\"handleCloseDialog('editForm')\">\r\n            <el-form :model=\"editForm\" :rules=\"rules\" ref=\"editForm\" status-icon label-width=\"100px\">\r\n                <el-form-item label=\"链接标题\" prop=\"title\">\r\n                    <el-input type=\"text\" v-model=\"editForm.title\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"链接地址\" prop=\"url\">\r\n                    <el-input type=\"text\" v-model=\"editForm.url\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"显示顺序\" prop=\"link_order\">\r\n                    <el-input type=\"number\" v-model=\"editForm.link_order\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n                <el-button @click=\"handleEdit\" type=\"primary\">保 存</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { Link } from '@/api';\r\n\r\nexport default {\r\n    name: 'List',\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            // 添加\r\n            insertDialogVisible: false,\r\n            insertForm: {\r\n                create_time: new Date().toLocaleString(),\r\n            },\r\n            // 编辑\r\n            editDialogVisible: false,\r\n            editForm: {\r\n                title: '',\r\n                url: '',\r\n                link_order: '',\r\n            },\r\n            // 缓存当前数据\r\n            current_link: '',\r\n            rules: {\r\n                title: [\r\n                    { required: true, message: '请输入链接名称！', trigger: 'blur' },\r\n                ],\r\n                url: [\r\n                    { required: true, message: '请输入网站地址！', trigger: 'blur' },\r\n                    { pattern: /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/, message: '请正确输入网站地址！', trigger: 'blur' }\r\n                ],\r\n                link_order: [\r\n                    { required: true, message: '请输入排序位置(数字)！', trigger: 'blur' },\r\n                ],\r\n            },\r\n        }\r\n    },\r\n    created() {\r\n        this.loadList();\r\n    },\r\n    methods: {\r\n        // 加载列表\r\n        async loadList() {\r\n            let { status, msg, data } = await Link.list({ pagesize: 12 });\r\n            if (status) {\r\n                this.tableData = data;\r\n            }\r\n        },\r\n        // 添加链接\r\n        handleInsert() {\r\n            // 通过$resfs 找到 insertForm\r\n            this.$refs.insertForm.validate(async (valid) => {\r\n                if (valid) {\r\n                    let { status, msg, data } = await Link.create({ ...this.insertForm });\r\n                    if (status) {\r\n                        // 添加链接 \r\n                        // 因为 insertForm 为单层对象，所以浅拷贝即可，若是嵌套数组或者嵌套对象则需要深拷贝。\r\n                        // 后台返回的 data数据 中 有 link_id \r\n                        this.tableData.push({ ...this.insertForm, ...data });\r\n                        // 关闭弹窗\r\n                        this.insertDialogVisible = false;\r\n                        // 信息提示\r\n                        this.$message.success(msg);\r\n                    } else {\r\n                        this.$message.error(msg);\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        // dialog组件的事件方法 ===> 所以点击事件写在组件上\r\n        handleCloseDialog(formName) {\r\n            // this.$refs.this.insertForm.resetFields();\r\n            // 因为页面有两个表单，所以使用传参的方法。\r\n            // 重置表单的验证提示\r\n            this.$refs[formName].resetFields();\r\n        },\r\n        handleRemove(id, i) {\r\n            // 查阅文档 -- $confirm 返回一个 promise 对象 ==> 所以用 .then .catch 分别捕获。\r\n            // 也可以 使用 async await ==> try catch 捕获\r\n            this.$confirm('此操作将永久删除该链接, 是否继续?', '确认删除', {\r\n                confirmButtonText: '删除',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {\r\n                // 删除链接 -- 需要 link_id ==>在scope.row中 ==> 所以传一个参数,即link_id\r\n                let { status, msg } = await Link.remove(id);\r\n                if (status) {\r\n                    // 后台数据已经删除 -- 但是页面并未更新 -- 需要操作DOM -- 删除\r\n                    this.tableData.splice(i, 1);\r\n                    // 信息提示\r\n                    this.$message.success(msg);\r\n                } else {\r\n                    this.$message.error(msg);\r\n                }\r\n            }).catch(() => {\r\n                this.$message.info('已取消删除');\r\n            });\r\n        },\r\n        // 启用\r\n        handleOpen(link_id, i) {\r\n            this.$confirm(`此操作将${this.tableData[i].usable == 1 ? '禁用' : '启用'}该链接, 是否继续?,`, {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {\r\n                // 另存了一下数据\r\n                let usable = -this.tableData[i].usable;\r\n                let { status, msg } = await Link.usable({ link_id, usable });\r\n                if (status) {\r\n                    this.tableData[i].usable = -this.tableData[i].usable;\r\n                    // 信息提示\r\n                    this.$message.success(msg);\r\n                } else {\r\n                    this.$message.error(msg);\r\n                }\r\n            }).catch(() => {\r\n                this.$message.info('已取消启用');\r\n            });\r\n        },\r\n        // 打开编辑弹窗\r\n        openEditDialog(link_data) {\r\n            // 缓存 scope.row 的指针地址 ==> 所以 current_tag 改变的话 ，tag_data也会变。\r\n            this.current_link = link_data;\r\n            // 还原表单数据 ==> 把表单数据还原到 编辑弹窗 中。\r\n            // 此处浅拷贝 ==> 断开与表格的数据的双向绑定 ==> 不然修改时未点击保存，表格数据也会随之变化。\r\n            this.editForm = { ...link_data };\r\n            // 打开弹窗\r\n            this.editDialogVisible = true;\r\n        },\r\n        // 编辑标签\r\n        async handleEdit() {\r\n            let { link_id } = this.editForm;\r\n            // 表单验证的第二种写法 ==> 参考 Element UI ==> validate中不传入参数(即回调函数)时\r\n            // 则会返回一个 promise ==> 可使用 try catch 捕获成功与失败 \r\n            try {\r\n                let valid = await this.$refs.editForm.validate();\r\n                if (valid) {\r\n                    let { status, msg } = await Link.edit(link_id, { ...this.editForm });\r\n                    if (status) {\r\n                        // 保存修改后的标签 -- 操作DOM\r\n                        // 需要让 vue 监测到我们修改了DOM -- 动态属性 -- set()/get()\r\n                        // 而 Object.assign 合并对象时，就会调用 set()/get() 方法\r\n                        // 调用目标对象的set方法修改（合并）数据到目标对象，调用源对象的get方法获取源对象数据\r\n                        Object.assign(this.current_link, this.editForm);//修改完后，未直接排序，可以直接请求 list ?\r\n                        // 关闭弹窗\r\n                        this.editDialogVisible = false;\r\n                        // 信息提示\r\n                        this.$message.success(msg);\r\n                    } else {\r\n                        this.$message.error(msg);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.list_head {\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Link.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Link.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Link.vue?vue&type=template&id=91810980&scoped=true&\"\nimport script from \"./Link.vue?vue&type=script&lang=js&\"\nexport * from \"./Link.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Link.vue?vue&type=style&index=0&id=91810980&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"91810980\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","directives","name","rawName","value","expression","on","$event","insertDialogVisible","tableData","scopedSlots","_u","key","fn","scope","row","url","_s","usable","openEditDialog","handleOpen","link_id","$index","handleRemove","handleCloseDialog","ref","insertForm","rules","model","title","callback","$$v","$set","link_order","handleInsert","editDialogVisible","editForm","handleEdit","staticRenderFns","data","create_time","Date","toLocaleString","current_link","required","message","trigger","pattern","created","loadList","methods","status","msg","Link","pagesize","$refs","validate","valid","push","$message","success","error","formName","resetFields","id","i","$confirm","confirmButtonText","cancelButtonText","type","then","splice","catch","info","link_data","Object","assign","console","log","component"],"sourceRoot":""}