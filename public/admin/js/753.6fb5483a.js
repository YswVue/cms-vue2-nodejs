"use strict";(self["webpackChunkvue2_cms_admin"]=self["webpackChunkvue2_cms_admin"]||[]).push([[753],{9753:function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"list_head",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("角色列表")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:create",expression:"'system:role:create'"}],attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:"",size:"mini"},on:{click:function(t){e.insertDialogVisible=!0}}},[e._v("添加角色")])],1),t("el-table",{attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"role_id",label:"#"}}),t("el-table-column",{attrs:{prop:"role_name",label:"角色名称"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-tag",{attrs:{type:"primary"}},[e._v(e._s(i.row.role_name))])]}}])}),t("el-table-column",{attrs:{prop:"role_description",label:"角色描述"}}),t("el-table-column",{attrs:{prop:"role_code",label:"角色代码"}}),t("el-table-column",{attrs:{label:"操作","label-width":"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:edit",expression:"'system:role:edit'"}],attrs:{type:"primary",disabled:1==i.row.role_id,icon:"el-icon-edit",plain:"",size:"mini"},on:{click:function(t){return e.openEditDialog(i.row)}}}),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:remove",expression:"'system:role:remove'"}],attrs:{disabled:1==i.row.role_id,plain:"",size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.handleRemove(i.row.role_id,i.$index)}}}),t("el-link",{attrs:{href:`#/system/role/${i.row.role_id}`}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system:role:auth",expression:"'system:role:auth'"}],attrs:{plain:"",size:"mini",icon:"el-icon-setting",type:"danger",disabled:1==i.row.role_id}})],1)]}}])})],1),t("el-dialog",{attrs:{title:"添加角色",visible:e.insertDialogVisible},on:{"update:visible":function(t){e.insertDialogVisible=t},close:function(t){return e.handleCloseDialog("insertForm")}}},[t("el-form",{ref:"insertForm",attrs:{model:e.insertForm,rules:e.rules,"status-icon":"","label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insertForm.role_name,callback:function(t){e.$set(e.insertForm,"role_name",t)},expression:"insertForm.role_name"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"role_description"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insertForm.role_description,callback:function(t){e.$set(e.insertForm,"role_description",t)},expression:"insertForm.role_description"}})],1),t("el-form-item",{attrs:{label:"角色代码",prop:"role_code"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.insertForm.role_code,callback:function(t){e.$set(e.insertForm,"role_code",t)},expression:"insertForm.role_code"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.insertDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleInsert}},[e._v("添 加")])],1)],1),t("el-dialog",{attrs:{title:"编辑角色",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t},close:function(t){return e.handleCloseDialog("editForm")}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"status-icon":"","label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.editForm.role_name,callback:function(t){e.$set(e.editForm,"role_name",t)},expression:"editForm.role_name"}})],1),t("el-form-item",{attrs:{label:"角色描述",prop:"role_description"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.editForm.role_description,callback:function(t){e.$set(e.editForm,"role_description",t)},expression:"editForm.role_description"}})],1),t("el-form-item",{attrs:{label:"角色代码",prop:"role_code"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.editForm.role_code,callback:function(t){e.$set(e.editForm,"role_code",t)},expression:"editForm.role_code"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保 存")])],1)],1)],1)},o=[],s=(i(7658),i(9551)),l={name:"List",data(){return{tableData:[],insertDialogVisible:!1,insertForm:{role_name:"",role_description:"",role_code:""},editDialogVisible:!1,editForm:{role_name:"",role_description:"",role_code:""},current_role:"",rules:{role_name:[{required:!0,message:"请输入角色名称！",trigger:"blur"}],role_description:[{required:!0,message:"请输入角色描述！",trigger:"blur"}],role_code:[{required:!0,message:"请输入角色代码！",trigger:"blur"}]}}},created(){this.loadList()},methods:{async loadList(){let{status:e,msg:t,data:i}=await s.uU.list();e&&(this.tableData=i)},handleCloseDialog(e){this.$refs[e].resetFields()},handleInsert(){this.$refs.insertForm.validate((async e=>{if(e){let{status:e,msg:t,data:i}=await s.uU.create({...this.insertForm});e?(this.tableData.push({...this.insertForm,...i}),this.insertDialogVisible=!1,this.$message.success(t)):this.$message.error(t)}}))},openEditDialog(e){this.current_role=e,this.editForm={...e},this.editDialogVisible=!0},async handleEdit(){let{role_id:e}=this.editForm;try{let t=await this.$refs.editForm.validate();if(t){let{status:t,msg:i}=await s.uU.edit(e,{...this.editForm});t?(Object.assign(this.current_role,this.editForm),this.editDialogVisible=!1,this.$message.success(i)):this.$message.error(i)}}catch(t){console.log(t)}},handleRemove(e,t){this.$confirm("此操作将永久删除该角色, 是否继续?","确认删除",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((async()=>{let{status:i,msg:r}=await s.uU.remove(e);i?(this.tableData.splice(t,1),this.$message.success(r)):this.$message.error(r)})).catch((()=>{this.$message.info("已取消删除")}))}}},a=l,n=i(1001),c=(0,n.Z)(a,r,o,!1,null,"91d47452",null),m=c.exports}}]);
//# sourceMappingURL=753.6fb5483a.js.map